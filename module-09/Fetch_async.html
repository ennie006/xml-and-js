<!DOCTYPE html>
<html lang="en">


<body>
    <ol id="customers"></ol>
    <script>
      const xhr = (url, method = `GET`) =>
      new Promise ((resolve) => {
         const xhttp = new XMLHttpRequest();
        xhttp.onreadystatechange = function(){
            if (this.readyState === 4 && this.status ===200){
                resolve(this);
            }
        };

        xhttp.open (method, url);
        xhttp.send();

      });  

        function stringToNode(html) {
        const template = document.createElement(`template`);
        html = html.trim();
        template.innerHTML = html;
        return template.content.firstChild;
      }

      function displayData(xmlDoc){
            const listElement = document.getElementById(`customers`);
         
        const customersNode = xmlDoc.getElementsByTagName(`customer`);

       
        

        for (let index = 0; index < customersNode.length; index++) {
          const customer = customersNode[index];

          const listItem = stringToNode(`<dl>
          
          <dt><h3>${customer.getElementsByTagName(`name`)[0].getAttribute(`title`)} ${
              customer.getElementsByTagName(`name`)[0].childNodes[0]
                .nodeValue 
          }</h3></dt>
          
          <dd>${`Customer ID: ${customer.getAttribute(`custID`)} 
          `}</dd>

          <dd>${`Address:${
            customer.getElementsByTagName(`address`)[0].childNodes[0]
              .nodeValue
          }`}</dd>

          <dd>${`Phone: ${
            customer.getElementsByTagName(`phone`)[0].childNodes[0].nodeValue
          }`}</dd>

          <dd>${`Email: ${
            customer.getElementsByTagName(`email`)[0]?.childNodes[0]?.nodeValue
          }`}</dd>

          <dd>${`OrderID: ${
            customer.getElementsByTagName(`order`)[0].getAttribute(`orderID`)
          }`}</dd>

          <dd>${`Order by: ${
            customer.getElementsByTagName(`order`)[0].getAttribute(`orderBy`)
          }`}</dd>

          <dd>${`OrderDate: ${
            customer.getElementsByTagName(`orderDate`)[0].childNodes[0].nodeValue
          }`}</dd>
          <dd>${`Price: ${
            customer.getElementsByTagName(`itemPrice`)[0].childNodes[0].nodeValue
          }`}</dd>
          <dd>${`Quantity: ${
            customer.getElementsByTagName(`itemQty`)[0].childNodes[0].nodeValue
          }`}</dd>


          </dl>`);
          listElement.appendChild(listItem); 

          
        }
      }
          
      const main = async ()=>{      
const data = await fetch ("customers.xml")
 const stringData = await  data.text()
      
        const parser = new DOMParser();
        const parsed = parser.parseFromString(stringData, 'text/xml');
        displayData(parsed);
      
      };
main();
 

    </script>

</body>

</html>